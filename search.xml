<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>C++用流函数进行格式化输出</title>
    <url>/Mrluo123.http-github.io/post/3482.html</url>
    <content><![CDATA[<p>调试的时候，输出友好的话，可以有效的提高调试的效率，因此，在这里整理一下，一些格式化输出的常见方法。</p>
<span id="more"></span>



<h1 id="1、setf"><a href="#1、setf" class="headerlink" title="1、setf"></a>1、setf</h1><p>stef是set flags(设置标志)的缩写。编制（flags)是以二选一的方式来做一件事情的指令。</p>
<ol>
<li><p>ios::fixed 不用e计数法来表示浮点数</p>
</li>
<li><p>ios::scientific 用e计数法来表示浮点数</p>
</li>
<li><p>ios::showpos 始终以浮点数显示小数点和尾随的0。如果不设置此表示，而且一个数字在小数点后全是0，那么他在输出时可能既没有小数点，也没有尾随的0。</p>
</li>
<li><p>ios::right 在使用成员函数width()来设置域宽值后，输出的时候会按照区域宽度来右对齐输出</p>
</li>
<li><p>ios::left 在使用成员函数width()来设置域宽值后，输出的时候会按照区域宽度来左对齐输出</p>
<p>例子：</p>
</li>
</ol>
<pre class=" language-c++"><code class="language-c++">#include "pch.h"
#include <iostream>
#include<fstream>
#include<cstdlib>
using namespace std;
int main()
{
    float a = 0.00;
    float b = 1234567.23;
    int c = 10;
    cout.width(50);     //设置输出域宽为50
    cout << "Peter is a hansome man" << endl;
    cout.setf(ios::showpoint);   //显示小数点后面位数
    cout << a << endl;
    cout.unsetf(ios::showpoint);//取消上一个格式化输出
    cout.setf(ios::scientific);//科学计数法输出浮点数
    cout << b << endl;
    cout.unsetf(ios::scientific);//取消上一个格式化输出
    cout.setf(ios::fixed);//直接输出浮点数
    cout << b << endl;
    cout.unsetf(ios::fixed);//取消上一个格式化输出
    cout.setf(ios::left);//靠左输出
    cout << b << "	"<< c << endl;
}
</code></pre>
<h1 id="2、setw"><a href="#2、setw" class="headerlink" title="2、setw"></a>2、setw</h1><p>操纵元函数setw()和width()类似：</p>
<pre class=" language-c++"><code class="language-c++">cout<< “strat” << setw(4) << 10;
</code></pre>
<p>输出： 10；在10前面有两个空格，因为是4个域宽输出的。</p>
<h2 id="3、setprecision"><a href="#3、setprecision" class="headerlink" title="3、setprecision"></a>3、setprecision</h2><p>使用<em>setprecision</em>(n)可控制输出流显示浮点数的数字个数:</p>
<pre class=" language-c++"><code class="language-c++">cout<< setprecision(2) << 10.4<< endl;
</code></pre>
<p>输出：10.30</p>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>格式化输出</tag>
      </tags>
  </entry>
  <entry>
    <title>KMC平台基础软件配置方法一览</title>
    <url>/Mrluo123.http-github.io/post/63333.html</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">
  <script id="hbeData" type="hbeData" data-hmacdigest="1bbddaf015597294917749e42484ac9e445ced6d32052e972129272cd22768bd">4181f10c7c15e461887c19ff1613231b769cf483a6053eb5762bdd7800b4e7cf9c66c80980a6eda8415091a6abb51144ccf35e2ea76c3c973037ec351694f65fc93c4e319464f00b0948867b640425bb816f8e67af5a68260c1cd51d5b8bfbdedc354e2f24c099747c2fe423ad322143b55af877ff2596b05978588a35903128ee6fed8bddf5403a394a591a40449023f923df0732b26179a9c8c7f5a7080eb1a0bddf1efea6e1d988d1c3682ae6b7674df3b7bd230d31f6acae7fb7af6cad6862d861ea736450d22fdc7aa81508589b9bec1fed14c93d05ffc573e5ba0058affdf372a3dad32f3232c71513b84b259d20e8a08a91591254a2c2d8dd115676736cf7168e71d9563b2e89c54ce5ebfa496c5ff4e5557c13379001c5f304ca348fc6f66efc9c97a3ee512f52549b1fd89ecf61284601ed5c5d3d0c0d5e6c31ece43cab43a9cbbf2362ce309639d3c5f509e5a534761aa05ab7b468efef7683c6b648ebceae6cd07dc33502cd5769e8c9d1d3829fa758b55e89552bb6f8962ac06661f548506fadac07daf25bc673b4dab87fd1ad91d9d0947c1afaf5bbd522fecdafb83637366402eacf9c9d96ed9f07912ae1d0670da37f370640907f4a08fcc906585ec244c06dbd265de08536b2dd0e49602b11e30a55fc3362de33f2793c78bad83c9aa0e271e821967021e546e716f8feeadb80fd535f46646b03135fd083fba17af678647137b000d6a659cd03d35f012b9b77755a8d1ec1845045835afefa78e163d5ccf62858d58fd2502612bb075f74de101e19f8e12b8c5cba15e0a3189978f6d7bd96da40d4755e37843bc5f33fda44cb5341af879516f0da28640c8eb1b4bbdf99cd3be89051ca1521d003ac08b0ed057c7200f44e2bd4ff2e918f887b8356edfea6dfe03ec408c6cd20bed33dfa9b90730779ab3f66e0de32c7a4984b0bf708114f43d8bc86a6f1de5119c6551dd44fda6ef7db5a5ee085dd306096272dfcd2dbf50ff441a585b3e2eeba87973b15a9151d85903bb6667e6a045161f6e97dccadb1070175677999f0b8c005e975952eef08fecd9dab44d8be011373791404f084877a0781168e878bf009921b1529c9f756bdafb41298a09c34ba8b10940c9bc222d15b3d01c385a3e963557b9b944624d5b012fc780d00c0beb042a91883a78aaf0419441d537bbbed173d468ebdf0faa992593c773b80f3df2bfa08f2dcd4292c868e5209dacf47ff2305f317ec8b41c303d109313aed7bcc3f5f0dd075fa7eb43fcae5f63a6181a92024c53aa9ccd1751e9caa162823bbf5765d5fd7df50114db2f1b6170c00174ed6b0098c34b7be9ce7ff3896c147d8d9d616bb58b3dac43185bd74edd9d6258f3a42b49d05ad0f5699dfbb9755c3a7b67dcee757cb00bb2409a5253866cbfd8ef8799490264646c1f30b4c413e3144a4fe167db94bb440bbdb814836eb3322381e606baedd81528d9d128987b8e9deea0dad5aa10c52f7a7a9eea20e5b62a18360655a706103a28b9bc193c77a42695dcd092acffcfd745af6c24dc8c29aacf61c2c558c13b764826bbfd4f66758f6a54384ceb9db1c972cd7cafbb1d95b3ddd69edf506545e424afcec83310f7b77ccc6d485cb07f8856a9f7c64a605d8d3a641c2c1b202d4904d9d9d4dd1d881198182c6d647bd6b1c78ffb95ee4eafcd15ffe3247e4bda3228d548c540a736a4adad6c67324a91b8b3cbdd11d548168a0d00b4bc9842dbb1abc540080e733bd04c6d872881b782ac70d7732e5f59d6c395bbe9d5209b3ebca6a0d2c3c8f9dd3acc81ad224825a6ff1ab7d4c561155103bab7aa1885b2612678cc01836489b91b4094844de56e2dff6b7c449f767d749f4c261ab2bdf856a3fc8476bf0c12077b0d037a0345ba9399bf4bb2db1a233b1ef2bdbe4afbf76917b135ea34e46da7d2464ecea1210f40dab7b273d2f2b19eed3cd60e331f5aebd7d3b2f349667b7828ca1259e2187de946ecd315f3401833b1d1919dc13da077e28208b3f2e089cc23f52ed0f6ab786010e6a01cf0193148f1fcd4fe0f406c09ed172d19efaddbeb29dae28447b00cb060229f2899fc522b5718ca35f0f40f8af4a917902c4da4bc9e7cf1e75a674f017ad77b10cd0312d5dbef471c69d2cd2e8d8d44b582f6dee71cfb6e4dae8feb4f184fd9a89727e6f647122182ab9442ea76a3681278a7cf0f59d32c1c4a97b3ae73853f4b93091d6e5de61527c6fe43d085d41aee8ed328880b392d31d3e296edef5a56baed42472027df7d62ccd24c733528fb6bf8dc3f846563354a188ba10ad088ef6ad69944463796982cd3cfa8c2099e7cd42cf1ef2d935a099b7f11f396e5dc3735dbc32e959b7fecf44830354b40ac0d42fee6155649760ed1af11c32594d607f1d71ecc1c38c5f49b8e98ee6e7998443f9a9cd97236d3ae7dbb39bff305f24ac2957cfdf9de80b0a81fa29bca6aaaa14e34ed890e82723e48bff692014ca796c6d48b69495399406cefaf8aa910d6284ff493c4a43c7bcb1cf8f668e2b930fe97d4eb664864ab21906eb58ef4f9660fc8d10d38af4984966a1d5f31998a58a21ff5091c5d0c434bcac6808cfeb3eff18bd8de660ab138229357de0b9db8164946b3c1b7e4d7046675e2ab30d8845416b9626face0f861be4909e8ad2933e65939e314ebb6a1918d8569b1d3fc70f98ae310aba7a178954fc6068fbb01c8be7cded870ccbb637963f6f5a9f5e1ad6156edc27ee7603617c1e1679c7e9977761244ee2e6c28143ae1dadfe8d4f377b828bd47db10fcd38fe5f509d922e2a5ebd47a09cb7ebfeac2ca851c593f40e14b254d13d3927ab471bc616d786185c56228436c094ee34d103281937a7f66520105fef4e0880a6a46b7a728ffe9c6435e865ec0f8c0955196b7170ce56afbfa78eaa6499a6c5eb362b4b5c7ee4633eeeaaf96b1beac7b6b22f15a933923b40d4e91d4151123388de23e6a6f2f0e4728e2f7eb1f1236e8a75b1d275116e133caa56b69d0f75b95cd5d6c9532b1ae79b0128440fba9ebc07cf42d5da234e939d2dac68a6a635eeb343d08c074ea7708859407f22bb16ae0ef38864d70a39e8f87cf2c21de6183f244a1877117554e0acbc5acdba16dc8db86e74bbe4b7701ecbfaf3038a794b8a8e1ffaa7895b8e690fa9e988f3c4a4a443e8448c82603cb9f29eb87b1354715e06c2a17376f98a0a30f2cad1d7fbd09e880454823732c6088364f80a382af643a80727a78ac2687c4ab389f4cdd847f61444d35b1187e9d0ad716c2f960f44ba6d07cd4c412c109b1b4218f19f56504f5a19e5c5021a66f180f9ec43a51f07293ea7ca30fa8f15b1c9de66fdf2207ecbf1e1dab29b12fe2105649724e7f4419ecc981fee21769448c0fd2ee500efb33b20772638d65c6bfd54a12c9a207fe3cbae84cda89b53e9eaa07b066766d0740682215c08e72b122d4d623ce8e41ef513ff4b301e706c8c1ef487bde0c2764afc0088d2f3cdc8fae4563ac10cbf4d8a76e50599ef6d042c04f17cade988792b49ec31c4656053c5edd8494897673365f5ec57a2434615b7bd2dca2404efeca220c9ee7f5eb77de8d2a27c1a024781a7729d7919067e09e683a3c23356127d2ecaded0d3967843295dfc07720111011360e3067c53c2db212198e6d0224b7ef18017098b3322a359df881be060f015e0bc5f4392f2f7103159e63eeaba4e2d5062b25e3b8037b1492c4d3129f18a544fddc2d31312dca0065f447c411b349fe34f1c25830b08a102b28fd846cde2b15037d3a139e12ac359acfaf279097cd7715c0db4ba90fc76ee044d5831268ea081e2e5c3d9baa2db2b0f2c50ede7ed0fbc70ac32d5e189e56e7cb3af3003cd4ba8458619094fb8068211dbe4a09d72923fcd8901ccf09d6d723c7c66065b7e0f869e88d777ebaa9bd026b074aaa9259fb1be9336cbc45735b7a28ae4c09067b1c0e58003d6df3f1c4ec5d1fdc4b778e145ae327b510de548e4983b0011247c4315248a02d85fcb28c9daeabb50512d575012af6be66fd0505b5ce3282ba004df1eb439530182af6110c8258b9335dab668125dd695c87c536d1e59c3978b258c135f326cda21dcab537a7f99dc6bdacfbe1aea136b104c0aba292fcc8be96c2c2b29b1e8ce65ac033a8c4454be79f14866c58f0e8129fcfd9b5994a8fb9043032e6f5518f7eb36db6847b4fa2861c468786f710fc8271496070cb881e0e9965c84d0e02d23b1d0971d731d5dabe4b6f5922ac897831b12c3e0d6f360650ada6f0cdabcc2f3e7d3004207dc5cd1632011c0f5b82ffc8606b4afda6644cd14758a32a45f135fe3057995b2e3c0862f6474bf55a98c4ee34cc1e3e0135d212fa8d6eb2fac8c73b5b2e23f92eafeac219fb17ca5f85761370af7c7dbdca429dc564c9e1536f7b01bd32953295667295e350e5508f9b00f20f68ea1b1f09caaed185ac996cfe336c0338152ed3d570202f76525bfaa485cd15ccbac171c7996ba6ceeb2edc568cc350f12bc278eb4e4e1ccf6d2580644c920bc9e9e86f439794ae4dbd2d50cea03a8f2b24a2db4145d0012df8295a3d11e984c0e30226274b1ae3c2cc6fd7e6a58d4450da8f0d586a6bd1da7ee54d69d37d5bb67d6b4d239acb01de3728452652abf04e71967179df1dccb1e316620fac03e6220b83c9172c04615333f9b5250e3be357f5992ab97d794a916ca6c9e81b913ec100cb519c112593f204b8b9d3cde786eb14706f8efbdb024d430457a143aa877785d8ed77270cb2b99bd893b92e6f2f67be66d4f3ddd02426f93c26e8fc6f6c8d0440cf07a87e22edbeabf5aeed03e61390a346c60a400023448642eb4b4723e8ab017bdd845218a89d34f8ad778169af8b69a6859c9dc6c4ad9e897a47ded5852e7a02cb3b3bc0cad6b8fa421807661cb83e3fb95d1019ece5cdf4b781e679b6dd2e072c1a9d51e8ba3e75189d555c83ac5078ffa3e3215860905e8a3c6484f4763eb3c569d0eb9e8ba78702ee443bc512794f7941f19ed3f25babef28b59e0fb09cf2c6e08c3419a558355777692a842f3267ca753abf9a8c23f7563fe697e05d54b6f96162fc06037c42110784fc386bd7c2b4e5c38b67618b4f22cfe1d0dd8c7977715347d44967fc55d08f3db28bf90de34acd196f94e399e4ed4437da8d0b1c23466e2c2a367aacd83a69635aa20f2e7dca53b44aa7034b1c0dce6a82953b6850a1860eabc4153718464e94f85775161bdec42711c21c999e2cecd2e375ff76f262f967fe4c6d17dabc0946098e411d00f70cb96780846f02500bb4b3bd31ed5637b7f9001aa9d61e13dead4f1940d3e0238cd0d21e21fedff75f822e6bcab486fa7e02280e230b00114b3902271271dfe943fa690de8ad9e1490092199f7de32988f113ddaafff33f343bfc783c3be973b6ee1cf3069374c876f929da9d2323d70c634c3c258ecadb184fb6782eceefa09e5ee04925b28fbac3853a1206e6d22e5eb99e7346c059f2a94115c03febb746eb8458a5106af69f35cf68a7eab6bd6c5c45efb52f5219de01c2ce77e4bf21b88588e3125181aa63cf3975597aeabb53ede41ab7ba11a9c8d0fc3793dd7d333f6546283a502d1442fded4168c4c058085c464dfff514dce448a23df20c7423aec77febfb373354ac3c40fd34ee8f211c776f15c1937e2b7034e5b7acc9b2095463e4f1ba34aa7cfb1099d9073a8cd2063d5d6a10d6a35262fb428da9948dc3206b60950fc66887f8d012436a423f8c82c04ef57180479a1020fd38d5eab2d01191c7bbee39656c0c97d9475a9536715a370e4859384c6521848f1fe5386c186125a1e7ff4eaf5dc435b2bb8224cb9fbea2409bd267d7cb5ad18d56b98f99ecf11d581be05541ccc3f048eee2f8658e30a2d78f2ea395865495259ee24e5a7cd10d8bc07dba5288e2917dcef9d78e24f1ca74d6d68c96aa99e3ae854f5b7fec892a93a2d9930924f37ad48171f6afc10b994d82e5b45f05dd21bc88bc0529c9273803eb6f145be1d46fdab392c4aa3448b0fe8f6557510abfee7bc5b1bfdc9a29b5b8ccf7e90ffa8dcd401ef47535d0642b3533c255e46d5b15e70c8297fb30c99105a3e418120b4e57113649473add5e3a2a9ca3a275c9892fe636bce102da5e485bebcbfc5a98398dc8bb24195ae895b3a6846d8ffc2a303fd64b1aa3727d0e9bf950a3552357277938c417339bd9ccf4d5aa93264da6f6b0c8d71c91e6e0311c49131930e52ae8eb4c1e0cb964e1c141f371df3e00fd7fd09bb4fa9e8e62e32a4f51105377f905d02fdfefa76c772df110712d0b8f557cb1417fb2f919bc82dca9c9851354acbd9849c43be176bbd9dad75a58be0679dc2b703aec8058b8284691bf4fb31e12f3c51995da8bf3c58f37bfc10701ebd6b0478c10c39b3b8c3718757d07910bde7a8792c46804ceeee8c1684d4c702b75ca5c83f1544fccf43d830ddd2a483a27d4d1e3c4f15d888fed121904ca2ee632f9d833b207c12a693b08a6848235d701b2f62a3f2a65b5325056114ce4c860c893e82bc8bad9f68562b428ce95b2df3cf9914e0bc54f51416a0283f8435d01d7401ff825a6f19849c1488c171f6d50e147d48012ddd5cadfdde5ff346e654056e3cb1284394039fe6071ec30051a01f9b57bfa074f4685502899ef32764e8be8557f6466cde3c815bbf178443fd96821a1a472659cad8fca8b078c7794a203ad4add467b8795b7b6938429a103af6c58d30b6379b4f3a463463e04e45c56ec17674dc346769e3503ac906ced2fa4a7d186c0ba0400b7eb9c0a232bc4fe55352cb724967dcce1c073183aae7e1b775e698aea643db38ae1e54b8a386661ad045b2c3d7120b9f33c63cca988748a19a6f805c4fdb867bea6fb0295107b9d54093ad09317e9c5d96bf38a9134dbd8c413d2d4599f99dde05407639501755b979938d170167fa178e74f7754ec4d9dd6df73368f505b3e90b7cfaff2efc4296c295b6e2350f462a94e39712514f6e22b5ffafb26a4361d14efa44a8da56af65ff41c334aae054ed28e51a62f24a9d11fac671d20d2e9a14fe4d6f3597c745efce11b4ddd179b955d42686e589e4770fdcec31d9ce1648e95c1e2a2ac09aa6c9e4e0bd41f0b169340657adb2159a96964e4b5329ed626c155f02c80c05bc1bb4e9c1c84cabd76dc6b7e171224a34de714d392170d0f0ef24986c7227b6facb14c3c3509530947c8928de89be6e6a5684a781013dcd6d3d86748625833011181b0c7050ee5d04d3a18e6f8ee4860c379632103e285694bf59ecd4923de09421bab0c581b4a9697242bb46a240ab1c08263149427ee17442d283e948017db9dbbe1294bd9643fad4f635b17c9ada147fa74b8c93b3cea57ad3b95ec6a67410105e4c68cb9107a462a2f13d2709d9df7ba91afdbed9939525079a932d1c05e7f32782b81a6a340c5df012926f6487e292f554f4b61e01f1b06165323014db434e428a7358a369c4e77bcce42ad34bcd290dc56bb583a397cd22d03b7a283bfea38cc53184e89abc706a06c35dd588c0dcdcaa204cd88b49432543d3b0413a6734814ee92a82ca1591653701b7c86f912705997311f00a58bb1eca52cc86f4fc5e5e2ed55ae8ff55c0a8c8ed46143e9f914c43f7ca0c7d908f8eb694693119e40ed293e2cfb7a8ca815ae64fda4cbf87d0d168c81cbb345546e5efbcbca35563e427b88aeac37aef1f771b236e74ed4302ce2151090ed73b06c82e6d85c5d419c4628a729b629870d1d94fe0c3d17ac3702efe2fa57870fc3bbc753644c2bef1939567f4e068c25a1f27a0e0102730c2c34e24e9df195c415a7cfd400d3d1f449ac8304452dd1d0b0c655104918d056ca9d9d7004a030a914521dff43417c03634cec23b3d10a25a61c9e1010c4dc0fac6f4e7077dfe8cf2bd1674a46180fac36a2a6015f4108de50581b294d39684cc10a927378482e1826b1a020e1769c12f73daade5d42c99655291cfbb7f68ee53560e3dff4efa04654423531dcb0ba175c5c3861f0bb4ecd28101eb241b0c9490e93215d80972cc2d39d98544027fee704f605a75c44b0056afbea3d3dfbbf344ede6751d665c15869ea027316c362d9ce31d8aa11c7ed662af4d253ec72047ef1659e6d8118afe1e2d7973332883eab65b4ba8dba6a5c3ffcce526e7c70555ae23b46356e38d4d55643f808542b2d6c22c5e171ae93522fc6cfe9fb1e90669e005fe7de3586a43dc91107c1a525852d213d2cd5f09e36e18a7ca07a2c3dabddd00f9cfe942233c4f66a88690f11f89e4b4219445e8bdced45a8610040f7264c4349f34de269191b2f10bbff0249724ac1a1f4ac7eb47039ae4818f01bd2ed44001b3b6f8c08f388910ae82b1fdfb3dc5ffafbccc2854369f63f7e895eaeb37d58b8ed15444f29be1d83f2f1a714844a644d12aa8ed933f11ea4746c19110e7d74ad4fdda7a14b1e7478226317895cc759f019bd6fac9d28b51d7b69c74a13a34fe98f2a7533e2ff4bb1ac84b16b5ae5ec536343073fa8342682f09f0a0c76eebb1ba7238ce6b24e80bd5e8c21d82c839e74ae9394adf40ce9af625becdfc1cb9d1d3e3785dbfac75755125ead633e507c7b3ee4688cfb29d145c7c5cc30f4e36cfc101c1670f200ecb4d46de49cb1768c6f91942284b012cf21bab0893444062ac327f05267d99322ee33b9b404efe1a747ff4d73285ac630c2e8fbf20ab53110c2eb13a2410abea8a5706207c63098d8dd21d36ea596eb84e5028c5d366621dd80eb82792382a22ce57c92b70c4ce7b14a076bb0fd5bedf72ef15dc17bcf0f71c832ec91da02bdd78e8de814a99073bc8aac8b17de7882465e75d157ac175249ef094c07da91fd811d2005b94ec7a0d700f3d8a9c112ccca1110e3981ce918aaa8f49c1df9f41e36f451705ffed233a70996d3f7323165b256e3e44da978d4c855bcd579d0ca8176b0c89fe5161902697d269d9fc7d27eec5783c93bf9234b278e6b0d3dcca4edcf3e11b1f81ab68717fc17f90c8f6bb80f476d3023591f0410db1dd7a1afe233445dcf2fafb893ee9cb0c5dcfbb3d0bb0b5f8c7ffc4ffc873a8fb5650ca72e8be82fba8ac80a6c7abd1443127919e1647c00cfa1ccc35cd4c6761b2d94c5005572f0c6b06365da8a521fb525b2cfbdc47714cbc4aacb28dec82d52ca89338966294854d67b514ca791458f0f1091af0724755a75e73b9e2e9bc0b3b4747bf961dac62573a8b9abb466132d2a2ac9e5becc57d1e45e56f9784267555c4187b29ff09c11d06db9f4073b0d056d2794bfba0da3445a674c09182c0ab547d798ac1a75a3bcbb888ee2f626b581213356569140920fb37afb687d4665c1d85dffdd07fd43cc0ea43012fb019f6d84140e6aa826df5e3003a292a387e633c72f224552908d8d6f36b137c1a2f1b541465cea1319d459ece94e681346bb56398e34af716415cd3f90fd0b0c5ed8cf1519541558c245b74187a38b70e27994e21dccf21a26ea008d2f1c1038a88ab406fb8a27eb9c824b18c1adcac4236de8bdb3b413f4339e03bd1e3b30afd0a36542ab98b4a090e21740fad063212df382c1fd15799bc98db7fcce0cb9ae70356e8c3148177696283bd7395196c47104d78bc561922bbc57a745b14b60beb30cbacfd40027900c5acfd37bd9a0246bfc8c6fdb7aaf8c993e71d47db15f9b8c7baf5d6e59ab20355478ce1d3de7ad9ffa5d4a6c55d405990b7ee227e9dd2ca30959b49c397bfd113421350699fbc7bdd33696abc14b7a1d1ea9bc64721d52097ad8b1cd1b8af41d30d09a35f2cf84f01e2df18185dce44dec01c3a722b7a2868ab88069b91cd32c4947e58478d0803ecc2f237f9178ed7665564eb10b9ed6200ca6c3c1f2257d9c73f6daf6778881116aa7504896198e9924343a00327b026dc28035c51ad910e3acd245615b48922026b15e47e101e4a983cd9708460eb8dcc7ccc54f2a3f4b543657a1b6c42b4fa6be9bb303732756c37371b05de1d190690024d746aa09da7f868e0eacccf4e18879c96f5c0e7e51b3b9cde45aa44c7cf3d222efdadccc4975fea2d4aa5bc97bc87482249df370d4a4540ba8c0e1f27a07629445ff65f818c1cc0bbb4f98dd2afee69f21634013b2e184d2f56aa5a316f6bc37cc19d9529094caff85e312f6225ddbb5a489a31bb2a3e41d282c59051f6dd77cc00dcde25fb8741d3b44291ee25c46101247e7483765bc1fdf649c6848f522f248fee175ce99e4cee373b270bcfb4ebcbc679653461341fdc3785962e0e380020c88cb8978cc225ff0efe906e6bb9f6243abc196252d187a0b1e0665cc3037f99c6af208e7b6a1ae44252de2f118f6873c72098227bf2999009934b9578646eb5060375d82b46d0f3e21bfcb8af317a6c3fe2771cbbb45bf265acfd30a1d067b126a6683a8ae569f10a56cba74f8a105b17ec09414efbd77921056f3c1f15e33f929fb4e24c593687bee78e68e0bbe3a4c404a23cd30c78583f4b72d86d4767645b2c59234aaf59501f2344e4cc474bc2717e242f54e6c8d7cbe428fdd5a69c2c2e3c1477bf443360c480afcafa05ddbdec0c363979d999c821cc1aa5799939003068dffbd67e6912f99ef2dbd22ee7efa47131bc03e301a6e99fbbc2f8171b35166c4b75feb767b29ec1b5062dc612b5406cd12f3217930d8b7c08f97a3c1398fff3b5b6075c785560e2069c7616d4f12fbb601e0c7d491bfcc41e13e0fd229919af3c4bb6ee5730a7b1ec79b6bf0978e208619c22a98ea99953b1234f6db36a99aca902ae80a7b0fb59cdac007b3a50a17a0b6eb83b6970c9ad072d3c766ef241c2ea451e9681f56b467b3e0eb85575bd8d6606051bea02cb0b96320ccab52b954d28502602efab2c3cec2fa8920622ceb48da5c19d5e58851f2f93b9b6aa52e5a493f7f8f7eac1f9c77ace120bc3a143b5d00d1bd36c47e540e9e651a1c4ed58b491e8e96046f084324e40960ec8fdde751707f8f02f21c499607432364da211ad7fe6c3a079d1fece8574411a35ca5abbfa7cd11db5f80932980235b3f41ee3ce2d614c1390ff4433151ccbf5d131f016403de651f3053c82c0a91075d7e5000ecaf2b9310d6e2b4d1b9d6514a36ef8653689451e209d964d37a6b3617149d4586395fddf2f9dd812a57fbb45b7610e2f5dfa2855b1317033491ae89dffc098314cbf21d717935d6956caf05e90bc3d4ef25081c195240a05cf9e1e1c6048df96bb1a65176c8ecdb59af16399574b30e7efe1d271f70998175ebd050c1525a49250d5f88d4b2d964fa873671af4f522e50ab8ddbce9cb47b8e6520b7ceeea4defd9e8ab9da1ebdaa643f2c82cea1d3d06c4cffbd837e52186906faabf4a06bf00beb7224795a572db39002e9b76d4bcc7f082e7bfc76cc454fc59b67c61500bfc5ad6fc6acd142082d1678a9c691be4edff2ff27b77592d60c7af57b8540c7e2492f5c867f2f2ec6ce1912a1a5ab726cc32e1bd2099c1b30ea72048afeb89d5f26042d38e67c8d3fb0900dc8fd9f4bee9ce03e5b4f545296f5190aa6538260e231758d1dfc6dc9fc4f90458e55406e943c30f1e72ce60b470a4a5ca716ac13d111e748a4b0a7f6aa4792e999446a09d77995a9c3e3d26581bf7264f7b827449a268ec605ff095b3e04aeb5748ae44d6ad90a5bef3f9bdd954934c0c882f3a39b88d05eac1e87d4ef86ef354f3b5153b0048cd316379f1d05f6e8e7dc37950cc376ab36fb3a845de069d98cc595337038e80462f2bc8d8046ad04af8bdd30fab98983f665c3bb9c3740c7b634016575783b53e1a66979aa4350a2f0ff25003d2cacd1f6260150ffc78d28e80f58d63793024a955cc19f3b8ccb965d3755f97bbc1e75f94dd8d18d10dde2b6b0f6fdd63626d9dacdccebdd90f518f7a4525c64a4787f786331f42ec57c6236a9117981ff67395842a86701ae0109e1b18700a660c25252ed824ffcd6f368243d64aea97622e59faa06af88be6adb80f965773c70bc5992ec06cfa2dcfb664e1034af2add748b2b53b43ea5b125aa5ac0223fda5b64155630fb6b645e661d7e50ecceaaaae8f708ea1383e135fabdfb80c97f2fe4213b4a521cb0d02748889a72f227e6bab9b1d5f8c27559ce7c367b51e7e9288af3d9ae7a204cf0f0e55618cd54e177eb59f35ecbb926bba99174c5f946eb436cd6348ae652bc65f9003c6e000a558a9af476a037ab7137fee9c47375c340c70f6b680992763e2174982ad29291a0153c67b8911fc894d778fb5da1a9a4fd87789e21dacf8a89ae4d49721226aa470b5348ff125327d5e367665a4dcd961222589b03a61d9578e853e98428954b210108890328abcbf37f6e64bc4b3003ff09a993b304b3353bfa75849afee963075f6cfc1ac25269bbdf2383c233b1a4b8f43753c1b3cc419163b39d9dfcae686ef6613fcb858a6851244a2ece638e7c95f4c94cdbd6d99445c6cf8b7ed2a7480e4c2bcfb792eafe33148c5298efe794a986250fe8cb990666acb788eef97240dca1a44f4b9326889e2542092f40fdb2723efc06c7760491ee5d331697b890210b2292561efc28b7fbcc0831b1ab7ee35f5deea907ac436f2530488aaad68a7e438b4a372de1364d6b06f2d7d4fd9d94a97da76778b3d4998e3a8b5492323b4f5748ade4d71d1eefa27030ffaa502a74cb52419fc1b753c821916c27f93b661993673425af56bd7a4ce6125604012c5251c7e352c73fbdb9640197f6ec823aefb26e8b06d92d9580705d51970874ade93d3d9be5d97a10f76f4d56b5998976f5d6707f24162cbd7cf308782dcdb359033ce197c547efe688190a39cbedfcbd0f1d2f9d13e4a57c2d367ba7cde966bd07b644b25909731296159781f672441f851898e4c26d2bfd59cecac5f77652ab20036f54217f1702b4d1dd6d19defdce0106986efdd41d3742083d05824ddea9fd028c16fcbc0cdba26c01e2206387ab9be43823b6a6eab4f090c9e1ec597c897153fdcb6d585b2e742ae40776da5a25ee1751a2dbfa3c2ed3c9fb42b3ce35cdc53497be6033a3e8a7e7658204f05c3778a1bede4db9ebb02e0bbe939c84f89622ca6cd329a55a57516818e17a6b187699abdbfcedc445c5956d432008349b99bd62d35ba2a6afe67b574173bb70c41faa6c6273c184b0f6eafb9ce3ed4efcc35511a90b8da33eb01a16400ccb85f089313d3e4c6a84ff2a535bc40fa7b887572967f1e147c85bf27d327e279833b87f6140d152b2c13c441e21e94d2eee6286e764ae6353651aac41ba3c90994e1fc2abaf6380207e6192e49a37f414566ec6cfc171e8e3d11d024cbed8737b5e6d8275ebfaa0210d4f11af710289376dfebe6d8d73fed7be5ef0338036dabfd4d79791d4f7f9a47196f25fb9572de534f90c753f338249892a226f302b3abbcc04608899112f296aaa96ff55de9eb89a59531ddbc1ea9772046853085bb2d50d134de0947710344659d537e66fd675a0d1960f5d9d9e8fe75a60cbd5c0e2dc8b6160c9971b8d08c544fed9fa9e17dca6f1b68c48bbbd78ecca73af1c92c4ea31c01101561ff0d966f161c8143ec34d8630c52ce167735140ce38eace4233ca3db7b6617eb4d681707b6acc92a021ee93928058536c3e81281ad481e8598545ed281a17f8cfaa35229da30aabb322102f8a868df3eb8335b9176498721093212e111e4f48d8f6af413be84277c676e3d57227ad74d3bae608a5d5a6f3c5ca745d688efb75d0f99df5cfcc4d44e7b9b9a8d6788a1595fcaa40da58ab9f1ea4c22456980ce9c68f4e50496c19044a66f4f324b3d9801f5be065f2bfb3a6a64ba5479d105b9bfab54a75c69dec00c886b6980cc9af7acaab1569bb28a97cbeef444ef50fd5fc846fb60267e32ebb2e552e0fc64778b40992fd2a7ae3473aea64aca00563665e300b68255596dc7c1bbb34a6ca5c5fb5619f442753f634a2c78e3c9ca4163fd96ecad146614c4a04253d3e26bb6f8d71ce14b532a8c21edb0bd80e85bc6d308fac041e14e731c74d4d15c9da0b839e6cdcb3d21930e89297f03ec41b0c12cb8e40c0d3f18457106c21fdb8b8ef055375d3a1f22bfbe19d7ccc26d7855c0d450f57a0e6d031e4baa4b3c57dc211f634cbf129eec2e999a8d43b4bebc6dab7eba5571245621f16</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 请在这里键入本文的阅览密码.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/Mrluo123.http-github.io/lib/hbe.js"></script><link href="/Mrluo123.http-github.io/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>数值反应堆</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>SALOME</tag>
        <tag>多尺度多物理耦合</tag>
      </tags>
  </entry>
  <entry>
    <title>CUDA-ubuntu20安装教程</title>
    <url>/Mrluo123.http-github.io/post/199927a1.html</url>
    <content><![CDATA[<h2 id="0-CUDA简介"><a href="#0-CUDA简介" class="headerlink" title="0. CUDA简介"></a>0. CUDA简介</h2><blockquote>
<p>CUDA（Compute Unified Device Architecture，统一计算架构）是由英伟达NVIDIA所推出的一种集成技术，是该公司对于GPGPU的正式名称。透过这个技术，用户可利用NVIDIA的GPU进行图像处理之外的运算，亦是首次可以利用GPU作为C-编译器的开发环境。CUDA 开发包（CUDA Toolkit ）只能将自家的CUDA C-语言，也就是执行于GPU的部分编译成PTX中间语言或是特定NVIDIA GPU架构的机器代码（NVIDIA 官方称为 “device code”）；而执行于中央处理器部分的C / C++代码（NVIDIA 官方称为 “host code”）仍依赖于外部的编译器，如Microsoft Windows下需要Microsoft Visual Studio；Linux下则主要依赖于GCC。</p>
</blockquote>
<blockquote>
<p>在GPUs（GPGPU）上使用图形APIs进行传统通用计算，CUDA技术有下列几个优点：</p>
<ul>
<li>分散读取——代码可以从存储器的任意地址读取</li>
<li>统一虚拟内存（Unified Memory, 从 CUDA 6.0 开始）—— 将所有 CPU 和 GPU 的内存置于统一管理的虚拟内存空间下。</li>
<li>共享存储器（Global Memory）—— 访问快速的区域，使之在多个线程间共享，有效带宽比纹理存储器（Texture Memory）更大。</li>
<li>与GPU之间更快的下载与回读</li>
<li>全面支持整型与位操作，包括整型纹理查找</li>
</ul>
</blockquote>
<h2 id="1-安装步骤"><a href="#1-安装步骤" class="headerlink" title="1. 安装步骤"></a>1. 安装步骤</h2><ol>
<li>Add GPG Key on Ubuntu 20.04</li>
</ol>
<pre class=" language-shell"><code class="language-shell">sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/3bf863cc.pub
</code></pre>
<ol start="2">
<li>Add CUDA Toolkit Repository</li>
</ol>
<pre class=" language-shell"><code class="language-shell">wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/cuda-ubuntu2004.pin
sudo mv cuda-ubuntu2004.pin /etc/apt/preferences.d/cuda-repository-pin-600
#Add the repository
sudo add-apt-repository "deb https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/ /"
</code></pre>
<ol start="3">
<li>Run APT Update</li>
</ol>
<pre class=" language-shell"><code class="language-shell">sudo apt-get update
</code></pre>
<ol start="4">
<li>Install Nvidia CUDA on Ubuntu 20.04</li>
</ol>
<pre class=" language-shell"><code class="language-shell">sudo apt install cuda
#Add the CUDA installed folder in your system path
echo 'export PATH=/usr/local/cuda/bin${PATH:+:${PATH}}' >> ~/.bashrc
source ~/.bashrc
#check the version
nvcc --version
</code></pre>
<h2 id="2-运行你的第一个CUDA程序-HelloWorld"><a href="#2-运行你的第一个CUDA程序-HelloWorld" class="headerlink" title="2. 运行你的第一个CUDA程序-HelloWorld"></a>2. 运行你的第一个CUDA程序-HelloWorld</h2><ol>
<li>Here is the sample of CUDA C code to create your first program:</li>
</ol>
<pre class=" language-shell"><code class="language-shell">gedit helloworld.cu
</code></pre>
<ol start="2">
<li>Paste the following code in the file:</li>
</ol>
<pre class=" language-C++"><code class="language-C++">#include <stdio.h>
__global__
void saxpy(int n, float a, float *x, float *y)
{
int i = blockIdx.x*blockDim.x + threadIdx.x;
if (i < n) y[i] = a*x[i] + y[i];
}
int main(void)
{
int N = 1<<20;
float *x, *y, *d_x, *d_y;
x = (float*)malloc(N*sizeof(float));
y = (float*)malloc(N*sizeof(float));
cudaMalloc(&d_x, N*sizeof(float));
cudaMalloc(&d_y, N*sizeof(float));
for (int i = 0; i < N; i++) {
x[i] = 1.0f;
y[i] = 2.0f;
}
cudaMemcpy(d_x, x, N*sizeof(float), cudaMemcpyHostToDevice);
cudaMemcpy(d_y, y, N*sizeof(float), cudaMemcpyHostToDevice);
// Perform SAXPY on 1M elements
saxpy<<<(N+255)/256, 256>>>(N, 2.0f, d_x, d_y);
cudaMemcpy(y, d_y, N*sizeof(float), cudaMemcpyDeviceToHost);
float maxError = 0.0f;
for (int i = 0; i < N; i++)
maxError = max(maxError, abs(y[i]-4.0f));
printf("Max error: %f\n", maxError);
cudaFree(d_x);
cudaFree(d_y);
free(x);
free(y);
}
</code></pre>
<ol start="3">
<li>Compile your program</li>
</ol>
<pre class=" language-shell"><code class="language-shell">nvcc -o mycuda helloworld.cu
</code></pre>
<ol start="4">
<li>Run your CUDA program</li>
</ol>
<pre class=" language-shell"><code class="language-shell">./mycuda
</code></pre>
<img src="/Mrluo123.http-github.io/post/199927a1/1.png" class="">

<h2 id="3-更多教程"><a href="#3-更多教程" class="headerlink" title="3. 更多教程"></a>3. 更多教程</h2><ul>
<li>NVIDIA CUDA C++ Programming Guide：</li>
<li><a href="https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html">https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html</a></li>
<li>CUDA C++ Best Practices Guide：</li>
<li><a href="https://docs.nvidia.com/cuda/cuda-c-best-practices-guide/index.html">https://docs.nvidia.com/cuda/cuda-c-best-practices-guide/index.html</a></li>
<li>CUDA编程入门极简教程：</li>
<li><a href="https://zhuanlan.zhihu.com/p/34587739">https://zhuanlan.zhihu.com/p/34587739</a></li>
<li>CUDA学习资料-博主推荐：</li>
<li><a href="https://www.cnblogs.com/5long/p/cuda-learning.html">https://www.cnblogs.com/5long/p/cuda-learning.html</a></li>
<li>…</li>
</ul>
]]></content>
      <categories>
        <category>高性能计算</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>CUDA</tag>
        <tag>GPU</tag>
      </tags>
  </entry>
  <entry>
    <title>使用OpenMP进行C++并行编程的一些心得</title>
    <url>/Mrluo123.http-github.io/post/11326.html</url>
    <content><![CDATA[<p>最近在编程时，由于涉及到大量for循环等遍历计算，需要了解并行编程知识，于是看了下OpenMP的相关教程；</p>
<span id="more"></span>
<blockquote>
<p>OpenMP是由OpenMP Architecture Review Board牵头提出的，并已被广泛接受，用于<a href="https://baike.baidu.com/item/%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/2182364">共享内存</a>并行系统的多处理器程序设计的一套指导性编译处理方案(Compiler Directive) [1] 。OpenMP支持的编程语言包括<a href="https://baike.baidu.com/item/C">C</a>、<a href="https://baike.baidu.com/item/C%2B%2B">C++</a>和<a href="https://baike.baidu.com/item/Fortran">Fortran</a>；而支持OpenMp的<a href="https://baike.baidu.com/item/%E7%BC%96%E8%AF%91%E5%99%A8/8853067">编译器</a>包括Sun Compiler，GNU Compiler和Intel Compiler等。OpenMp提供了对<a href="https://baike.baidu.com/item/%E5%B9%B6%E8%A1%8C%E7%AE%97%E6%B3%95/967188">并行算法</a>的高层的抽象描述，程序员通过在<a href="https://baike.baidu.com/item/%E6%BA%90%E4%BB%A3%E7%A0%81">源代码</a>中加入专用的pragma来指明自己的意图，由此编译器可以自动将程序进行并行化，并在必要之处加入同步互斥以及通信。当选择忽略这些pragma，或者编译器不支持OpenMp时，程序又可退化为通常的程序(一般为<a href="https://baike.baidu.com/item/%E4%B8%B2%E8%A1%8C/3555818">串行</a>)，代码仍然可以正常运作，只是不能利用多线程来加速程序执行。</p>
</blockquote>
<p>在用OpenMP进行并行编程时，只需要加入#pragma omp parallel语句以及后面的操作命令即可，十分简单，便于程序员操作；</p>
<p>下面以vs为例，介绍OpenMP的简单用法：</p>
<p>1、首先，新建项目并添加代码后，需要打开vs的OpenMP支持选项：<strong>右键项目属性-C/C+±语言-OpenMP支持</strong></p>
<img src="/Mrluo123.http-github.io/post/11326/1.jpg" class="" width="500" height="500">
<p><strong>2、其次，需要添加头文件&lt;omp.h&gt;</strong></p>
<p>3、OpenMP有很多命令可以用，比较常见的就是用于for循环来提升循环效率，即<code>#pragma  omp parallel for</code></p>
<p>4、<strong>在使用OpenMP时，要注意避免线程数据之间的竞争而导致计算出现差错，同时，亦应合理管理私有数据和公有数据</strong></p>
<p>为避免线程数据之间的竞争而导致计算出现差错，下面是应用的一个例子</p>
<pre class=" language-CPP"><code class="language-CPP">#include "pch.h"
#include <iostream>
#include <stdio.h>
#include "omp.h"
#include<ctime>
using namespace std;
int main(int argc, char **argv) {
    //设置线程数，一般设置的线程数不超过CPU核心数，这里开4个线程执行并行代码段
    omp_set_num_threads(8);
    double start = clock();
    int sum=0;
#pragma omp parallel 
    {
    #pragma omp for reduction(+:sum)
        for (int i = 0; i < 40000; i++)
        {
            for (int j = 0; j < 40000; j++)
            {
                //cout << "i = " << i << ", I am Thread " << omp_get_thread_num() << endl;
                sum += 1;
            }
        }	
    }
    printf("sum=%d\n", sum);
    double end = clock();
    printf("Running time= %f", (end - start)/CLOCKS_PER_SEC);
}
</code></pre>
<p>reduction(+:sum)</p>
<p>冒号前面的“+”表示在各线程中sum要保留数据，计算结束后一起累加。</p>
<p>当然，OpenMP 不止能做累加，凡是累计运算都是可以的，如下表所示：</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>私有临时变量初值</th>
</tr>
</thead>
<tbody><tr>
<td>+、-</td>
<td>0</td>
</tr>
<tr>
<td>*</td>
<td>1</td>
</tr>
<tr>
<td>&amp;</td>
<td>~0</td>
</tr>
<tr>
<td>`</td>
<td>`</td>
</tr>
<tr>
<td>^</td>
<td>0</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>1(true)</td>
</tr>
<tr>
<td>`</td>
<td></td>
</tr>
</tbody></table>
<p>再如，为合理管理私有数据和公有数据，private命令可以声明循环的私有变量，这些变量在各线程中互相独立，互不影响，但是要注意，private不可声明static变量；</p>
<pre class=" language-CPP"><code class="language-CPP">#pragma  omp parallel for private(k1,k2)
        for (k1 = 1; k1 < 100; k1++)
        {
            for (k2 = 1; k2 < 100; k2++)
            {
                cout <<"k1="<< k1 << endl;
                cout <<"k2="<< k2 << endl;
                cout << "k=" << k << endl;
            }
            
        }
</code></pre>
]]></content>
      <categories>
        <category>并行计算</category>
      </categories>
      <tags>
        <tag>OpenMP</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>一个例子告诉你C++引用和指针的区别</title>
    <url>/Mrluo123.http-github.io/post/36765.html</url>
    <content><![CDATA[<h4 id="C-引用vs指针"><a href="#C-引用vs指针" class="headerlink" title="C++引用vs指针"></a>C++引用vs指针</h4><p>引用很容易和指针混淆，他们之间有三个主要的不同：</p>
<ul>
<li>不存在空引用。引用必须连接到一块合法的内存。</li>
<li>一旦引用被初始化为一个对象，就不能被指向到另一个对象。指针可以在任何时候指向到另一个对象。</li>
<li>引用必须在创建时被初始化。指针可以在任何时间被初始化。<span id="more"></span>
例如：</li>
</ul>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token operator">&amp;</span> r<span class="token operator">=</span>i<span class="token punctuation">;</span>
<span class="token keyword">double</span> <span class="token operator">&amp;</span>s<span class="token operator">=</span>d
</code></pre>
<p>第一个声明可以读作“r是一个初始化为i的整型引用”，</p>
<p>第二个声明可以读作：“s是一个初始化为d的double型引用”</p>
<p>此外，通过一个例子就可以发现：</p>
<p>引用者的内容和内存都和被引用者保持一致。而赋值的话不是这样，只是内容相等，会另开辟一个内存地址来存储。</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">"pch.h"</span></span><span class="token comment" spellcheck="true">//预编译头文件一定要放在最后面</span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">float</span> b <span class="token operator">=</span> <span class="token number">1.234</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token operator">&amp;</span> c <span class="token operator">=</span> a<span class="token punctuation">;</span>
    <span class="token keyword">int</span> c1 <span class="token operator">=</span> a<span class="token punctuation">;</span>
    <span class="token keyword">float</span><span class="token operator">&amp;</span> d <span class="token operator">=</span> b<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"c的值等于"</span> <span class="token operator">&lt;&lt;</span> c <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a的内存地址为"</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">&amp;</span>a <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&amp;为取地址符</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"c的内存地址为"</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">&amp;</span>c <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"c1的内存地址为"</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">&amp;</span>c1<span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d的值等于"</span> <span class="token operator">&lt;&lt;</span> d <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>结果：</p>
<p> c的值等于1<br>​ a的内存地址为0104FC38<br>​ c的内存地址为0104FC38<br>​ c1的内存地址为0104FC14<br>​ d的值等于1.234</p>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>关于C++函数引用传递的一些心得</title>
    <url>/Mrluo123.http-github.io/post/621.html</url>
    <content><![CDATA[<p>最近在看别人的程序的时候，了解到一种新的函数写法。<br>通常，我么在使用通常来讲，函数通过形参接收实参的数值，并返回相应的结果，这种方式我么成为“<em><strong>按值传递</strong></em>”（pass-by-value）,这种传递方法并不会修改原始数值本身。</p>
<span id="more"></span>
<p><em><strong>但是，如果想直接更改正在被调用中的函数中的一个值，就可以通过引用传递的方式来进行实现。</strong></em><br>这种方法我们称之为“<em><strong>引用传递</strong></em>”(pass-by-reference)<br>　引用参数传递过程中，被调函数的形式参数也作为局部变量在栈中开辟了内存空间，但是这时存放的是由主调函数放进来的实参变量的地址。被调函数对形参（本体）的任何操作都被处理成间接寻址，即通过栈中存放的地址访问主调函数中的实参变量（根据别名找到主调函数中的本体）。因此，被调函数对形参的任何操作都会影响主调函数中的实参变量。（此处引用*飘剑如虹 *的博客，原地址<a href="https://blog.csdn.net/u013130743/article/details/80806179%EF%BC%89">https://blog.csdn.net/u013130743/article/details/80806179）</a></p>
<h3 id="什么叫引用传递？"><a href="#什么叫引用传递？" class="headerlink" title="什么叫引用传递？"></a>什么叫引用传递？</h3><p>当使用引用变量作为形参时，它将变为实参列表中相应变量的别名，对形参进行的任何更改都将真正更改正在调用它的函数中的变量。当以这种方式将数据传递给形参时，该实参被称为按引用传递。<br>为了指明一个函数的形参是按引用传递的，只需要简单的对函数原型的形参类型添加一个&amp;标识即可<br>例如：</p>
<pre class=" language-CPP"><code class="language-CPP">int &a//这里的a就表示一个int类型的引用
</code></pre>
<p>为了让大家更清楚的认识到引用传递，这里举个例子：</p>
<pre class=" language-CPP"><code class="language-CPP">using namespace std;
int add1(int a, int b)
{
    int c = a + b;
    return c;
}//按值引用
int a = 1;
void square(int &a)
{
    a = pow(a, 2);
}//引用传递
int main()
{
    

    cout <<"1和2加起来等于 "<< add1(1, 2) << endl;
    int z = 2;
    cout << "before reference 'z'= " << z << endl;
    square(z);
    cout << "after reference 'z'= " <<z<< endl;
}
</code></pre>
<p>输出：</p>
<img src="/Mrluo123.http-github.io/post/621/1.jpg" class="" width="500" height="500">
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>引用传递</tag>
      </tags>
  </entry>
  <entry>
    <title>在Windows和Linux下如何配置MPI</title>
    <url>/Mrluo123.http-github.io/post/21781.html</url>
    <content><![CDATA[<h1 id="在Windows和Linux下如何配置MPI"><a href="#在Windows和Linux下如何配置MPI" class="headerlink" title="在Windows和Linux下如何配置MPI"></a>在Windows和Linux下如何配置MPI</h1><blockquote>
<p>MPI（英语：Message Passing Interface，缩写MPI）是一个跨语言的通讯协议，用于编写并行计算机。支持点对点和广播。MPI是一个信息传递应用程序接口，包括协议和和语义说明，他们指明其如何在各种实现中发挥其特性。<strong>MPI<strong><strong>的目标是高性能，大规模性，和可移植性。当下MPI</strong></strong>仍为高性能计算的主要模型</strong>。</p>
<p>在WIndows下和Linux下配置MPI的方法有所不同，本文将详细讲述如何在这两个操作系统下安装MPI并配置和运行一个简单的C++实例。</p>
</blockquote>
<span id="more"></span>
<h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><p><em>以下实例为WIN11+Visual Studio 2022</em></p>
<ol>
<li><p>下载安装MPICH,点击<a href="https://www.mpich.org/downloads/">下载</a>。这里下载的是微软官方的MPI工具，打开后有两个工具包，都要下载安装，前后顺序无要求。</p>
<img src="/Mrluo123.http-github.io/post/21781/1.jpg" class="" width="500" height="500">

<img src="/Mrluo123.http-github.io/post/21781/2.jpg" class="" width="500" height="500">
</li>
<li><p>安装。</p>
<p>点击.exe文件，建议安装到C盘默认路径；<br>点击.msi文件，建议安装到C盘默认路径；</p>
<p>打开cmd命令，输入<code>set MSMPI</code></p>
</li>
<li><p>配置visual studio</p>
<p>第一步：</p>
<ul>
<li>创建新项目或者打开您现有的项目。</li>
<li>打开属性页面，选择Debug或Release的X64模式。</li>
</ul>
<p>第二步：</p>
<ul>
<li>VC++目录→ 包含目录 追加 <code>你的路径\Microsoft SDKs\MPI\Include</code>。</li>
<li>VC++目录→ 库目录 追加 <code>你的路径\Microsoft SDKs\MPI\Lib\x64。</code></li>
</ul>
<p>第三步：</p>
<ul>
<li>设置附加包含目录 <code>$(MSMPI_INC);$(MSMPI_INC)\x64。</code></li>
<li>C/C++ → 预处理器 → 预处理定义 末尾追加 <code>;MPICH_SKIP_MPICXX。</code></li>
<li>C/C++ → 代码生成 → 运行库 选择 <code>多线程调试/MTd</code>或者<code>多线程/MT。</code></li>
</ul>
<p>第四步：</p>
<ul>
<li><p>链接器→输入→附加依赖项 追加 <code>;msmpi.lib。</code></p>
</li>
<li><p>链接器→所有选项→附加库目录 <code>$(MSMPI_LIB64)。</code></p>
<p><strong>最后点击确定就OK了！</strong></p>
</li>
</ul>
</li>
<li><p>编译&amp;运行测试</p>
<p>编译后运行程序，需要注意的是，MPI程序不能直接运行，否则只会识别一个处理器。</p>
<p><strong>正确的指令</strong>是：<code>mpiexec.exe -n your_processor_number your_code_name</code></p>
<p>运行示范程序如下:</p>
<pre class=" language-c++"><code class="language-c++">#include <mpi.h>
#include <stdio.h>

int main(int argc, char** argv) {
    // 初始化 MPI 环境
    MPI_Init(NULL, NULL);

    // 通过调用以下方法来得到所有可以工作的进程数量
    int world_size;
    MPI_Comm_size(MPI_COMM_WORLD, &world_size);

    // 得到当前进程的秩
    int world_rank;
    MPI_Comm_rank(MPI_COMM_WORLD, &world_rank);

    // 得到当前进程的名字
    char processor_name[MPI_MAX_PROCESSOR_NAME];
    int name_len;
    MPI_Get_processor_name(processor_name, &name_len);

    // 打印一条带有当前进程名字，秩以及
    // 整个 communicator 的大小的 hello world 消息。
    printf("Hello world from processor %s, rank %d out of %d processors\n",
        processor_name, world_rank, world_size);

    // 释放 MPI 的一些资源
    MPI_Finalize();
}
</code></pre>
<p>成功，Enjoy!</p>
</li>
</ol>
<img src="/Mrluo123.http-github.io/post/21781/3.jpg" class="" width="500" height="500">

<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p><em>以下实例为Ubuntu20.04.4 LTS + gcc 4.7.5</em></p>
<p>Ubuntu下安装MPICH较为简单，使用apt安装即可。</p>
<blockquote>
<p>MPICH是一种最重要的MPI实现它可以免费从<a href="http://www.unix.mcs.anl.gov/mpi/mpich%E5%8F%96%E5%BE%97">http://www.unix.mcs.anl.gov/mpi/mpich取得</a> 更为重要的是 MPICH是一个与MPI规范同步发展的版本 每当MPI推出新的版本就会有相应的MPICH的实现版本 目前MPICH的最新版本是MPICH-4.0.2，具体请参看MPICH官网：<a href="http://www.mpich.org/">www.mpich.org</a></p>
</blockquote>
<ol>
<li><p>安装。直接使用以下命令：</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
</code></pre>
<pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> mpich
</code></pre>
</li>
<li><p>编译与运行：</p>
<pre class=" language-bash"><code class="language-bash">mpicc -o your_code_name your_cpp_name
</code></pre>
<pre class=" language-bash"><code class="language-bash">mpirun -n your_processor_number ./your_code_name
</code></pre>
</li>
</ol>
<p>成功，如下图所示，enjoy!</p>
<img src="/Mrluo123.http-github.io/post/21781/4.jpg" class="" width="500" height="500">
]]></content>
      <categories>
        <category>并行计算</category>
      </categories>
      <tags>
        <tag>MPI</tag>
      </tags>
  </entry>
  <entry>
    <title>如何安装win11+ubuntu双系统</title>
    <url>/Mrluo123.http-github.io/post/3709.html</url>
    <content><![CDATA[<h1 id="Windows11-x2F-10安装Ubuntu-20-04-6-LTS双系统"><a href="#Windows11-x2F-10安装Ubuntu-20-04-6-LTS双系统" class="headerlink" title="Windows11/10安装Ubuntu 20.04.6 LTS双系统"></a>Windows11/10安装Ubuntu 20.04.6 LTS双系统</h1><span id="more"></span>
<p><strong>1）如果你电脑本来就是双系统，打算重装ubuntu，则需要完全卸载ubuntu并删除引导项，请参考<a href="https://blog.csdn.net/qq_43310597/article/details/105782722">这篇文章</a>：</strong></p>
<p><strong>tips:推荐使用<a href="https://www.diskgenius.cn/download.php">diskgenius</a>来完全删除ubuntu，最简单最方便</strong></p>
<p><strong>2）如果你电脑只有win系统，打算安装ubuntu作为双系统，请参考youtube这个视频教程：</strong></p>
<iframe width="760" height="427" src="https://www.youtube.com/embed/bVmTxwUuXlM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>







]]></content>
      <categories>
        <category>Ubuntu</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
        <tag>双系统</tag>
      </tags>
  </entry>
  <entry>
    <title>数字孪生技术学习</title>
    <url>/Mrluo123.http-github.io/post/d2feeb9b.html</url>
    <content><![CDATA[<embed src="../pdf/White-paper-for-DT.pdf" width="100%" height="750" type="application/pdf">
]]></content>
      <categories>
        <category>数字孪生</category>
      </categories>
      <tags>
        <tag>数字孪生</tag>
      </tags>
  </entry>
  <entry>
    <title>核工高清素材图(长期更新中)</title>
    <url>/Mrluo123.http-github.io/post/1b933ad6.html</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">
  <script id="hbeData" type="hbeData" data-hmacdigest="1babb0b1c7da852e222927d0ef2be38797cdb0046dad25dd46ee014965323386">4181f10c7c15e461887c19ff1613231be1a5ecacd740d4740771096fe153c173c89c303b65c70511c3eefcbe9cd9eb5912e96cb31b1810a6a5dcbf816ebb9a321340e66fa634d72b0851dd2a427a0ca4e738e2800aa739951d59284060c70889065bbb2f5b1005ec416b76b1e80a137b32c63a612a9dd4f6d6ba4848731ddcbf0adb60016cd1c7c08acaed0cfbc7ac77da4b23920d04361c1d96e28c47c835fbcd43e29d245a11cdf54a3ca635dcee40209c392211884787071453cf4f2863ccb3995f4c0437d36e7d0023fbcd4ef0d100d31ca1457d290703472350c4ae2d3ff5ba2a1ecc4e1f7b8421901a3e720509b48de566e718a391572c88fa6c73a79c986bafbffbf47b8c5a62364c44a4048ca668aef69baba2d9f15c9995b05fbcccb79d29978f2b406358ba5a22951340c0ca99327e0d631d27a4c2cc2a36f07f29e5ad8ed3e8b86b76842401544405e3054e5612ec82a34c405f5c3d8e349e3533b0c336a6931a8b7e621c4b597fa1367bf6f6bccc6bc454ec2f799b2d93421fc77d0e6e5aa850edc144247c7f3c5ca0d726079a1e86b4a5bbc94f65346365fd02c0d06e2093f1fd3587c10e2df2bf6fb950e6a698b5cfc28b1e0ce0ce579b2b3111744b4a896fd4a077c58c565bfbf2c77accfddf1ff4ea1f9d920eac373be0f3d72d258b5e967dbdae1787e2b14702bb1fc129477c4c656ae1c9379fa27ab848651348fdb007b53d2d0fa4fda26cd7065b25e409f15faee148c3eb888b8680bcc50490190548b6bdc6b49e14155e770c6ed0e7851cc7325d5188f3b5a822dce4cacc35af331eb81d67c22f3573a3224385893ce4083ba1dfcf5204f71704ad5ffd30a4c9ab0cd53a0631cb61ffced829e0ff6846f92afa36cc5e00184bedf25df0d8c093b0218d0f553b32bc7cc889e8c89ae5b1127d76d4f617f6466c75746bcce28277b52c59042cadcb8ea7aa073446d742783200c37006384774487221e7d07df8ad2b4e1dabe5696a679ddf35162d4d170dce2ecde3ec10cbaeccba5f7f1bf45740af31adcdab82cd3b767bacc3d7aaf441d38530a4903fb0b045ca5e52</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 请在这里键入本文的阅览密码.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/Mrluo123.http-github.io/lib/hbe.js"></script><link href="/Mrluo123.http-github.io/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>素材</category>
      </categories>
      <tags>
        <tag>素材</tag>
      </tags>
  </entry>
  <entry>
    <title>稀疏矩阵存储压缩技术简单介绍</title>
    <url>/Mrluo123.http-github.io/post/9ed8a6a7.html</url>
    <content><![CDATA[<h2 id="什么是稀疏矩阵？为何要压缩？"><a href="#什么是稀疏矩阵？为何要压缩？" class="headerlink" title="什么是稀疏矩阵？为何要压缩？"></a>什么是稀疏矩阵？为何要压缩？</h2><p>在科学计算中，经常面临大量的线性稀疏矩阵方程组求解。所谓稀疏矩阵，即元素大部分是0的矩阵(有些资料定义非零元素不超过5%的矩阵，为稀疏矩阵，如下图所示为稀疏矩阵和稠密矩阵的示意图), 矩阵的稀疏性可以用一个分数来量化，即矩阵中零元素的个数除以矩阵中元素的总数。</p>


<p>显然，对稀疏矩阵中的非零项进行存储对计算机内存是极大的浪费，因为这些非零项的信息对求解毫无意义，因此在实际操作中往往采用矩阵存储压缩技术，存储稀疏矩阵时常用的有如下三种压缩格式:</p>
<h2 id="Coordinate-COO-x2F-三元组"><a href="#Coordinate-COO-x2F-三元组" class="headerlink" title="Coordinate(COO)/三元组"></a>Coordinate(COO)/三元组</h2><img src="/Mrluo123.http-github.io/post/9ed8a6a7/coo.gif" class="" width="600" height="600">

<p>这种存储格式比较简单易懂，每一个元素需要用一个三元组来表示，分别是（行号，列号，数值），对应上图右边的一列。这种方式简单，但是记录单信息多（行列），每个三元组自己可以定位，因此空间不是最优的。</p>
<p>常用的开源矩阵求解库Eigen中的<a href="https://eigen.tuxfamily.org/dox/classEigen_1_1Triplet.html">Triplet</a>就对应这一操作。</p>
<h2 id="Compressed-Sparse-Row-CSR-x2F-行优先"><a href="#Compressed-Sparse-Row-CSR-x2F-行优先" class="headerlink" title="Compressed Sparse Row (CSR)/行优先"></a>Compressed Sparse Row (CSR)/行优先</h2><img src="/Mrluo123.http-github.io/post/9ed8a6a7/csr.gif" class="" width="600" height="600">

<p>这是经常用的一种，我们会经常在一些标准的线性代数库或者数值运算库中看到此方式存储；CSR是比较标准的一种，也需要三类数据来表达：数值，列号，以及行偏移。CSR不是三元组，而是整体的编码方式。数值和列号与COO一致，表示一个元素以及其列号，行偏移表示某一行的第一个元素在values里面的起始偏移位置。</p>
<h3 id="Compressed-Sparse-Column-CSC-x2F-列优先"><a href="#Compressed-Sparse-Column-CSC-x2F-列优先" class="headerlink" title="Compressed Sparse Column (CSC)/列优先"></a>Compressed Sparse Column (CSC)/列优先</h3><img src="/Mrluo123.http-github.io/post/9ed8a6a7/csc.gif" class="" width="600" height="600">

<p>CSR是按行来存储一个稀疏矩阵的，其原理与CSC类似。indptr中的数据表示矩阵中每一行的数据在data中开始和结束的索引，而indices中的数据表示所对应的在data中的数据在矩阵中其所在行的所在列数。可以看出，在indptr、indices和data三个数组相同的情况下，通过CSC和CSR分别表示出来的矩阵互为转置关系。</p>
<p>注：上述图片来自<a href="https://matteding.github.io/">Matt Eding</a>的个人博客，更多矩阵压缩方法可参考<a href="https://matteding.github.io/2019/04/25/sparse-matrices/">Matt Eding’s Blog</a>或<a href="https://docs.nvidia.com/cuda/pdf/CUSPARSE_Library.pdf">CUDA手册</a>。</p>
]]></content>
      <categories>
        <category>科学计算</category>
      </categories>
      <tags>
        <tag>CUDA</tag>
        <tag>稀疏矩阵</tag>
        <tag>计算机</tag>
      </tags>
  </entry>
  <entry>
    <title>虚拟机安装Debian以及配置SALOME教程</title>
    <url>/Mrluo123.http-github.io/post/23422.html</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">
  <script id="hbeData" type="hbeData" data-hmacdigest="9bc410bb7dd9ec0e43c4c2b23a15aee8729c849daba08057021de0ea562be842">4181f10c7c15e461887c19ff1613231b22aa4d85e140ea19953c563fcc668896f3a80b785891477e79ac7435d5f949ed808863d2da90b450e33ffb8f6344545bdc35d0ed41f3fae9fbdc51e36f2e7f0f29418675200a0abe50c932cc5e77553ff150e822684f6981af3b2d513c5d4840f8c43f47894c65b1f0ef68327d2b4979eaa987b89518e81539ed459b455adee1b339a2b15ebf94356060f5eeffdb7ab711316f59dac0ece67ff89a4367097f9a71cbbd5bb21c81cac3d29f00bca201651b5247f8aff682d9333bfd1f81401180e9c144e411750dc854f8bbf4bf6d4ff6bd90b340434311f1d7e934f75def6aa7e67cd29e69baf12e1d2b71e1f7977400a540b7a4f31018fa7d0c1e6aff64b8c716362a44d5e7a5f3a956dc620c6946351541a951df6d9d805ffc686198e1033e6d164df5afebefa255b4b7f843a42a2b3577a319c68d73afb431c62d01407fe1b4f027028833e1128dce17ce7a077ebb8e99a0497f079eb9bd017c2c0524383b1186142b0d6963dac8a146f93bca8e9013b1121ea7f1dac98bada68762a51facda7c16581fc84d4c1acc607abbdcea46493ee4eecb427b0f13fdfd104b6f6ee41b0bdf08754ab8a6f3f38743e03f0ed1becddab0ad9b86bbf2c9dbf5268bba22a98ca2d3262f5b8814d340e63a0029e7975f54a11a9a9e58f5fa0178f6ac6ff5ca7d21d9c11ca1e7e324528eed12ed02153a96d84d676b8793eb4f0d5b6e9f19234c996a007340a99b8e0af185705494f57b4dd81e7b00f96549dcda27cbb34b07ba48578c5056c4ccdef4e539d9fb1b9e18f061807bf454b964347febe76841dd367c89f509947ace167119c19f2e3595bec1b33b96879aafe30b6d1773712f7dfc15400161eea59aefd1264b66d52fca32c556dcd445bde6b7d8d6e3071e89507fd3de8ce435c7924c67a868c2ca3b5e1ab7d2aa301a83c1987895f7cce55491ffc56c3517f220d9a2f71dc3d71f7b9027c0441beee8c63b1fe7d6ca7ca76db9a61735c80504db3c29ebc9cc164d63f109b60f52125039d3c448865e4239510836a511ed09fe0d53583f34b8f3af14c263228e322e934fe9ad1cd366e6c89040a07ff1b2d7ad3097e1dabb60cfb211863f58ad3addd29662e736b0f9f133c00da6581acf9fe504559e72e42d8e8a3979d2f98b323149d6e46dbed587552fab9d38cfbcbefcaa1b23a6b4aaf90481f918ea2fa76794611be53d3dc7c19f17a6086fad2669e8ed9babab36f9c31835c8ce5940d0cb8e2fe52ccaaf552a97af0ba9dc7ca2e4b9c2bf75d8a3c9de6604cd9a3e9b6790a8e256d78303c7063e3e459f8615221982875b4c59f299c52dc3c70678d11583bcf96d1d7f22ffcea162c25705749bd026ea91f581dd8a6812415c1d3fb7468b2e850ed80a374e36a4c1c0e4ec9e3544ec225b658da33a0de2043730d4ad9df753da54f388860f107a0445b4c772638d86d3094440092fa240b411c290501bed3db4e72b5f3a82012c77e089a4ab69f5ddec0724e50f47026105e72033d14ad5124628f5382a0b09ca7e684c4dc022b5fc8955a451c6a9c323a558d0a114b804c2b4938b265ec5209938bf2cdc4749d5183a84ace401dbc2201aae09815b19c1a5efb102897fd63ed3d80392fcbf469e605095519124dbee9cf0aa4575d2cd44bc7e3c0ecbffc4fd7a053092be8ccd8f3122d2ffedd982eeedcb24e80c1d46478a01e69aad827e6f0520c0613f8d398aa7618ec85cffea924981215ba3ef6b710a0365673433563ef345dff6d7cae7103df12f8ebf57cdcec207ae708f4c12dcb2a41ee9cac17e8ce5f0a8e9dc1263c71935af3cd0841c7a8550e9fea53d4da42bd82383b08bf053cb4b0a263a10a0c53b3781c456d48ad18fa99fe2174232c07be59b5381c3c8b4635ef42e3aed24bd0ed2f9981fb5f9ae7984769dfd86d693d66b117ef91725492862cf98b2e6202bf9be8521544899ed3e4c4119f18e64630d8a0cd641439af8d249ad1b159d852b5cc0a65aee7abad513f579e6f98b1b9bf2a27c02a4e5d25b65233d43902ad20b2b242134a60dce4d768afe2e56608fad23b0ea950b26fb77c41d6ed41506f617ceef33f3f77bbb8b016e43647e3f41764704755ba8418eb77ca908a0a51a13b6584da196bf57d891fe1aed9ffaef5470e1eb3d957696f593e136899f65d476038f6e8f028f8f9c529b152fb7f425e1fedc78126a9ec89c0bffd00e791229e4423ee0896c18825e3c19b9f9baf181f51d5838d2ac13a3707790355d7e1fce9f82d419190b48ab4a07a247d11cea323b536469495ff1f3ab3b787b8c7832c38765069b127281d9646b9f037f02ef2c545921dd3280dce109298cea2ca0d5e8b9cebd7374b9325f8d1fc011c8d29ee6621b0b3e0ee5e5e07ccc8eab6cf3128183834559ae540596f9ab60030f478bcff63f6b0862e46af1f7867855003d60cf611a4d261969c500f84b0eb81fb4212daa55414d8bf7501c0012dd0b3398b91e1678c04fe52176ae52d08419b262eb6f675a11e34f5af3aa0d6e9f7963bd770bfeca5629d98406f2f5cd99e1c0d58fc027c91e03448b9285651119f4f50dbf43e2c7eae23d6df5d396695c6abec191f1fb3175c21a487a46ee8bc8317627a9cdb57aad6a6981b7212960d668fbb8b0c37698e901abea16d6f66726bdeb4660efeb517b9c028fb6e0120549556a6961d3d3cca09b9f4a0c004c8dcd813123c38c5c481dd29541b431820307788c2b0fd69a55678e8402917befcea0a26394d0640435966ef79a702cee24a6c1cb280dc50e95bfcca4011458e08968ea0db8c13492ee23649103bf78a98b67c7c05dddad21c2c24a994b11ff49187f943be72d8b4abad3e279a5d43976295d83eaab5a8ba3b53baab323019c4ec09bc7e0e4106a8d9f8635eb7bef853aff06aece8f5cd93aa6c9688cbac6f10fe86ac8278400e67acd10723a6946be1b56fc138db3dbcd12a3c3bfc85e0fd72ff0202c436e19939640b70d3f4dec391744d224a8f3042831e77de8a9f96b231c8de65c20e9081e1d148828a98a2e72bb2cd8cf081bb28017d53992ed13a431c875d8282c93a1efaf4c154cc4da67324445e96fe7d28bae4acfded880abf693205e1d4e9963f1c3732d4c8d1a41dc21a789952d3ea8b4146e18f8453e46c8c3f0f57b05d5385b027eaf19545eefaf6408480fd1bf3cae489f37003e99dbf48e9cac3b2e290dc17f6963319af2df9cfa1aea7c54e64487c11fd33e3c7858f4207c70cdc4d92033a79894d48e34ee98a1a1276703bdbc031eee2404bbc96968b92073d9d0f29ae79e3c7f5f514a8648594b0ce64d935da9701168a9927e350655ae8ec6ffeb00599be3c1bd38440cfc5ccc4e7985df99d492ed9bfd69422da039447fec046e94e3611290dcf02e2ac512725ff6ac0e2d8ec66d163344ac15d883e750c172a7162fc32814d8111abbcd4f2a95736e8f74967060fd053345b905cedf295b35ca4f971d9122575bb1dfebaa38c6d49bd3d5edaaa52fa5cb9b13936b2e528b421ff330ef809060789cf2d4f476bb2f4bc6cc0f7c6591d33d12b1a8eee0b00843a80a9cc7d2ba6223776512cd0ceee85ecd52726ea94680361110f21c0e8a9aecd3d0d274da3429b0e35c53442369c9ed7ac0f708ca304dd85d99230db51c187dd544ea80b0beb6831ccd247b759bc293a6cbc947cb4088df77560175cfcac019446bc0841483ca7f0fcc82cf5c9d3e0a1d9dfae650ea8ddbfbcb1875625dbfea33ecabd12f5d9c94f523ab3d377588ec5ee2ff78a1923c0342c85f85a683ba0eb85b9a9134e6fb398c896f5399edc1cfd560b95b466f36058efd508c8b190e2794d8beb703a62fa2f209a4ed8a73affc0e80dd7a900eeb26f56d9132685d1592d6062fde4a2fcc8ef72fc2b12d6c4695550a1b26f7d65aac84ae269189bf20dac5622845ebfcd17c2c5871e3f92dc593eacf35b792c2845f98cca7d3361613eb97fa0bfc1592a1ca147bb73041683521b73c9ca93a4111f8ecd3c59709b5f6a517376d1e2fed6e86cc65c80c5d1685f012c73be7b86d9d19454408c769616a1a5e89b61e2f1a1ef00139d76111ff3c4f658c61ede76e4104c65e5820700224e22171b4cb9e0f8679cc4b488d22b0240445494e88c83b6f7d377d8fdf1581648a243a04a5d108fa717e4d4ef8902eb91c5452d4f45278cec5da5619b8974d107e7c7eb7734d08e81dab96284639a93aa4416534af55c1d1f4d4b539bce99f52571d32b956d84103073b52402059aa65c1c07da88aababc4f64c2466f79cb5687517ad59a2ae14c0d7e48fe238caff06343ee312d0aeb272bbab6cdc254487c3525ee57a8e2abf304b80bdaa383404698b42efe2726c4d9bec32ff02c81ef3884204277b5b2142ba148ab8918094fdfb7691be73e9572f584618b0e3438937ee6b7255fa7b3eb461f88dc20c1a5e5907cacb3f40ddb29b93005203287b8aa92733510db260f77dc8fa7b801577b25c6eb506d2e868bd8123d70ebd815483c7d4c0be0c5a82d4e6bab0ebe7d223df3ad1aac66365e69560eee9aa028d37fa2c6e07afd3f9c069a453b021e9395ab02dcc41e0b84c44f425c737ad6f75802ce3919214f8cc6aed70c085992c73c18ed3375aa4533fce102fddb33ab4ac6cabb8b743b57e5d3282f0fddcaf75959f983944f39e6165463f2f36c068b62005d673fca9bedb960a890a05bc3ad29066de4d5af958837e4d8b7b3d7b22ad8137cb65d5db6b85ef42fd1ba8e91daebaa8afa8a25ec37f9bf6e76b619cd81004866c9ee15d14b766a71158f42dd9e05a9698a1722c1298f470e560a74d3bd5403b4055a9c284d6c5b0438f45ae47c784620c2baec27986136c5a0a7d3a2c798ac2b815ff73c631b2ff8ca14239958d7fc3ccbf739757d32669761a699d762711c1bebcabb9a390e36b404a585c3f8b15946af7d036abcf8f1f116fb37d8fd76b327ca39b545a07f0465d3da497c9bd44506938c2ed77cc1557d798f259379fede9a2fd401b03c7e1958293b356f7fd99458e289f0f3a8bd022e33e16f54809e608bcfe413eba23377c4079689ac1d16eed7c3ecf09c8c2cf13c91125375f1abfac504348bbd7d9caed660fe9a65d03d92c3e05f69e69968a75d2ee110bff3566633afc93b8a18e931fa1f3d8b4b9dff7c5d1e30775b569a3a3ab36e65b0f454bc3478c2b2d74e5595f18c1491a299abb5233b78f6041a34f549b48a28c186a5f800097347cae71616053a8d816ce5af273267e0e5d59beba799d57280f5ed6dc3381d94505d1cd20e4b6f87e4834807de7d4e4c860edfae20c8beef88c10b35444ebc1b795e5bc0c0c08405fc30368fb18dad2882a62ab01275ef37544f0c2fad16abfb169851818b6674c68c59f1fedac7a99b23939162c644dfca63896b1f6b23d2efffcfcffa69db6bb218a3be6a8762cabea6cc5a5f98f1cbca48c52550056e113c47b443f5e83796bb4a5f84e4e6a7c6cbfa88f4033f7b464a319d6e03db5465a9afe3601914af80583b80cdcaa8b64e49046e0e65bfc39c9e6362e7b223d9e64d8da2abeac72fd6f82a24f58a13301c0b71278427b6e78c63673b838192df8ba1deb9fecd0d624324614cb0747fe9a4964d8a90b2f0299c29a2aea08cf7558995855bd1638e897e178c7fa57a8245c2f415cc410f5fb76d5420d8e3c973b4b271d8120c58a7ecd47fbd4c8dc3b965689fc9dd06b9a40768de84d798bb32e9fc5039f8c13d219fb3c61faf4d023d2db76f9ce57d0b9589de1bce2b06887453dbdbfd31a31060087f6e55a0c9ac006f7acd5f84689fcabc6a1cfed6b60b7b90e451069b82a0639db8ff9100cfd7d4e2015962be5eafdff6d56fe6009531d2e0d4669a6421f53394cef95c1478d0d0d67020c85588e6e1a0b15313df9bcc5daeeccee9711aad771ab20a2591480ba414ec9ef160fd046b867e4334bdc9178a7d22a3e3dcc05f6b9f084f5309a135759213918a76a5ce20e1d8d0a715d5b30ab4b35cfd69a7b554181b1b2f38c69c2956a3178db5251efaee9984fa6c65879cdb09e937940bd77a719c9174fb15c2a13a009a0cbff90238563e5ef77fc50b55fe2f72506146f87d0f6299e2bdbd149bd849df92c2dc04ae04fa0e29fa01eed04d8a1482c010c4b7dc23f6c65be3b3799f6bf28967aa89c02a4a3c753b5a8375d24b56e82b8ec495f5554c14f6e9f451e9bbefd6e457db6be662598ed358c3bec5d37d0f4274b8c527ba99ad763248e9017d96b1e127c13a9ff9ae40c2a2deaec4eef597b90ff343bd73e176958691dac471587537ca6c53b169d9e2b8085c3b3c17e4f188731b351e10542b61b1e39ae42596b5cc3a4fc846355ccb5f34c164940a23b71196124d2f967cf8b81c7004f70eb63e169f96205e3cbe6aaf95af07a13c0f2e284beb4f5a11b365acc7de02489dd7942c208df13814e8ffd2125f991adc78ce5a42f5169b0e1770ce6f1876f8d66f823313700aad8f1ad4407b1625adf067188ba52617cb62617ffcb5ee5317c217a124be34633b9c607db06aa5d573946ce7b71ea8738587132884555c2bc1dd564e809218b096c3c891ccc34cb66bfa0ae9611087dbba02aed36db3e047a42388d2b8150b195335a554d0b4ea544cb20c17092c90536f9f498ebf524a4d21cad259d763273b8aa614cb13cd10959814dd862b660531ed9e2fed09ab6cfbbfbaf2aab59b77b8b330490607c849b1ecaa78555270e38eb5402fad419ad1171b3a4f263e2c92c8ccb8c36188e46bb11580b461c5d8cfcd96073d40eabdee0bd9075c7f085702a5f508177526197b5ba3cd3f41122f7f8ba23c56cc82a4e51bfc2c6ab4559fe8fdf998ce7cd4c41043aa2991d17815a2e0b3e2b2dd723af699ae94e222c1ae6cd1585448abe8817acd377394375c81103f40470ca8899555ee2e130788efac21cc02ab821d4e311b4556803e2bad282b9054f781be050d8e1fff6931b187724804139543ecae2892c01b675fe3f4e8f33310a1a03c68cb8ee26091d1204d105c388b12d23c2cad827985aff89deb8a5fe05cdfc246eb8c1c94db0d1e1e6290c9b737342f076be8e4606e6dd77c18d337a358adbdfdccc3d88fd7f4a9760e72d06f5ad087b2dee9fec5f6d1e30ca8ef18584dc107e118a9d77a45113465a750fb31da8cb4823bfc9033908c08a89df7115a4d49c64d96d3573d953d344275785420996371ed37c0291f460155942e7cbb1acb6786ee57b7386dfb0da67d4e47909e2bdb0032dd3525355c006411af37b752fbedc5f2ebcc95b9aed7c7608e03ed4f8b3ebd1d5d0180556397062ab7173f5b54bdb35e4046df6fa8feb188cc2a67d58d45cf5abfe9b2d145f09b1706f62211cef2f586fc2a3fb825b5f40bfeca1801d94d4b79d2d69ccda88092607ddf4af4c316cde1351555b3c55b88418adc444c4e76ad776c22d8e15033ac7de189602eb7132b80231722c9571af0ef38fa8b724f5c22dc30e7675e362fba6e9af5abd31b712211cc504029cd08019a0f84f6ce544560a39ff5de917979543cedbba62c7dcfe44bdee20d7947ea40590816a69a41119d05949ccde2a0bab54c449ef5aee052a786c8b8300adb0d824f5c24186772a8455e51b96507788a6f5dbd635d33fec9c79ebbdd29f057dbc6668b06b70071939d40926011c2b55a227764bf701a44fae39efc452a9f51484d9ec4482a3713e01c059e2fb9a6379e6e562f2bc34aec7faaa0946f633af80cae568dcdf3d001c169b8e7b7f1fed838d0348b5176d84dfe29055889712338e7d3f148f2ffae3af7d1ddd6f4d5a714e88d36349f404ff2d188c50892255a7d2783a32f4f2360baef28bf375d49b32514b54d1bdce569e0330ca17890fa749813a353caa7a328780f3623c42c6701004d790efac221cf375ba1122da9a66003c803f1c3418af56a68b3fb5ff1fb7184b34b10440a8e631276ac9f8309a1e0e851446ac80ad1b2e1ed32a45c602ccc769966f0065d4af328e2aa353f6e0c48a4b9919f936ac4423bca38f0685aa2e269c431900bb7ca0fdbf5f18de905c0d1146a0b6accaafe51370ccef1675021080190a2249d298543a08826fc53a8e6f8504c141a2750bdf8ae21277cc30107972f0852aa0689652f8ed1d6ba4673b6bf1b40d4b28c020de43ed4ec12e769382c23919d5c1474373edb3d67abcf6a396a7755550433ee90ef85989a4c46532b72b5c1375dd0f1500cecbf30a0405180c0dceea51517050ac1563c6cc3918e6d6033f4065989ee7be7f88cfd1278f9998c983a38d18eac3d05e2d5a9c17373cb469702a51bdb914bf3c160adc85a037c8aa9a2c9c6f8ac14977fbc3069eaae621d6744f3bb817d241ae7a3741b15f0eeb5059937a6918e7fb1d6bd6916a61438adfb3c22aa2bfabd63e95f41eafe2e4d3666aa234f19781fa5d7d2a033d0fef9e594ebfca3aa6b53b020c7cbf70ca743de3583c5cd83c8b3d8d94a93f55dc8745fa42edac601108b56307c91f26b5502b2e0c2939ad922f66f4435f442872e0b9a486355b50ad097c4832ebad23778653af165f390f27b31861e2d70b431c971184bcc2a3550403fcc9a7d905ce4c0dae87c727710997785378387c2be4cbd5740185cf2bb2e7810baa33d28d58d87cd5203290f620c9dfac6cc0a3662947081f688259e96e4dbfc5ba9a1c927709c126b520eca798d1b42eb190d398420ce8bf7ed325735fbe1fe74ae0ac2a96926472472ad93ae96bc39421d5c8db63e7d690ee2c7d086e4fa341b51813633759da2f161654fbefa8858ddac2da8cca76be89e0e27e51fa7aac2919684076413d98bddc2dc4337c8a61615452a5c1fc444d1a3a38baf4efdccd620157a956417343260f56810e5437dfe466586e83142054f31805bc20e7db92ba8b728847d0d70d62357e46a2ffb67c0a612b7fc125a0a079470105079ba681711b90a712f29c02614a0ba85400f187c702e462f4daba647317e9429c843123a22ca29ff738cd402979e04c897e8d18b7af3cab7cdf0339ac65c8a6372a62844cc583d2a267ed88fe9521c0a3e28a1bb3fb7c57381bf6f1a354e31835238b9eec033641bb8bcaabd085360a22d1c0</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 请在这里键入本文的阅览密码.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/Mrluo123.http-github.io/lib/hbe.js"></script><link href="/Mrluo123.http-github.io/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Ubuntu</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>SALOME</tag>
        <tag>虚拟机</tag>
      </tags>
  </entry>
  <entry>
    <title>超算作业提交：Slurm命令备忘录</title>
    <url>/Mrluo123.http-github.io/post/65958fd8.html</url>
    <content><![CDATA[<h2 id="0-常用术语"><a href="#0-常用术语" class="headerlink" title="0.常用术语"></a>0.常用术语</h2><p>user：用户名<br>node：计算节点<br>core：cpu 核<br>job：作业<br>job step：作业步，单个作业可以有多个作业步<br>partition：分区，作业需在特定分区中运行<br>QOS：服务质量，可理解为用户可使用的 CPU、内存等资源限制<br>tasks：任务数，默认一个任务使用一个 cpu 核，可理解为作业所需的 cpu 核数<br>socket：cpu 插槽，可理解为物理 cpu 颗数<br>stdout：标准输出文件，程序运行正常时输出信息的文件，一般指输出到屏幕的信息<br>stderr：标准错误文件，程序运行出错时输出信息的文件，一般指输出到屏幕的信息</p>
<h2 id="1-Slurm作业管理系统"><a href="#1-Slurm作业管理系统" class="headerlink" title="1 Slurm作业管理系统"></a><strong>1 Slurm作业管理系统</strong></h2><p>大多数<a href="https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E9%9B%86%E7%BE%A4">计算机集群</a>（Cluster）系统都使用Slurm作业管理系统，采用共享模式。为避免系统资源浪费，使用时请尽量保证满核提交（即为单节点核数的整数倍），<strong>禁止在登录节点直接运行计算程序</strong>。作业管理系统常用命令如下：</p>
<h2 id="2-sinfo查看系统资源"><a href="#2-sinfo查看系统资源" class="headerlink" title="2 sinfo查看系统资源"></a><strong>2 sinfo查看系统资源</strong></h2><p>sinfo得到的结果是当前账号可使用的队列资源信息，如下所示：</p>
<img src="/Mrluo123.http-github.io/post/65958fd8/1.png" class="">

<blockquote>
<p>第一列PARTITION是队列名。<br>第二列AVAIL是队列可用情况，如果显示up则是可用状态；如果是inact则是不可用状态。<br>第三列TIMELIMIT是作业运行时间限制，默认是infinite没有限制。<br>第四列NODES是节点数。<br>第五列STATE是节点状态，idle是空闲节点，alloc是已被占用节点，comp是正在释放资源的节点，其他状态的节点都不可用。<br>第六列NODELIST是节点列表。</p>
</blockquote>
<p>sinfo的常用命令选项：</p>
<blockquote>
<p>sinfo -n comput1<br>指定显示节点comput1的使用情况<br>sinfo -p com<br>指定显示队列com情况</p>
</blockquote>
<p>其他选项可以通过sinfo –help查询</p>
<h2 id="3-squeue查看作业状态"><a href="#3-squeue查看作业状态" class="headerlink" title="3 squeue查看作业状态"></a><strong>3 squeue查看作业状态</strong></h2><p>squeue得到的结果是当前账号的作业运行状态，如果squeue没有作业信息，说明作业已退出。</p>
<img src="/Mrluo123.http-github.io/post/65958fd8/2.png" class="">

<blockquote>
<p>第一列JOBID是作业号，作业号是唯一的。<br>第二列PARTITION是作业运行使用的队列名。<br>第三列NAME是作业名。<br>第四列USER是超算账号名。<br>第五列ST是作业状态，R表示正常运行，PD表示在排队，CG表示正在退出，S是管理员暂时挂起。<br>第六列TIME是作业运行时间。<br>第七列NODES是作业使用的节点数。<br>第八列NODELIST(REASON)<br>对于运行作业（R状态）显示作业使用的节点列表；对于排队作业（PD状态），显示排队的原因。</p>
</blockquote>
<p>squeue的 常用命令选项：</p>
<blockquote>
<p>queue -j 123456<br>查看作业号为123456的作业信息<br>squeue -u paratera<br>查看超算账号为 paratera的作业信息<br>squeue –p com<br>查看提交到com队列的作业信息<br>squeue -w comput1<br>查看使用到comput1节点的作业信息</p>
</blockquote>
<p>其他选项可通过squeue –help命令查看。</p>
<h2 id="4-srun交互式提交作业"><a href="#4-srun交互式提交作业" class="headerlink" title="4 srun交互式提交作业"></a><strong>4 srun交互式提交作业</strong></h2><p>srun [options] program命令属于交互式提交作业，有屏幕输出，但容易受网络波动影响，断网或关闭窗口会导致作业中断。<br>srun 命令示例：</p>
<blockquote>
<p>srun -p com -w comput[1-2] -N 2 -n 40 -t 20 A.exe</p>
</blockquote>
<p>交互式提交A.exe程序。如果不关心节点和时间限制，可简写为srun -N 2 -n 40 A.exe</p>
<blockquote>
<p>-p com指定提交作业到com队列；<br>-w comput[1-2] 指定使用节点comput[1-2]；<br>-N 2 指定使用2个节点；<br>-n 40 指定进程数为40；<br>-t 20 指定作业运行时间限制为20分钟。</p>
</blockquote>
<p>srun 的一些常用命令选项：</p>
<blockquote>
<p>-N 3<br>指定节点数为3<br>-n 20<br>指定进程数为20<br>-c 20<br>指定每个进程（任务）使用的CPU核为20<br>-p com<br>指定提交作业到com 队列<br>-w comput[1-2]<br>指定提交作业到comput1、comput2节点<br>-x comput[1-2]<br>排除comput1、comput2节点<br>-o out.log<br>指定标准输出到out.log文件<br>-e err.log<br>指定重定向错误输出到err.log文件<br>-J JOBNAME<br>指定作业名为JOBNAME<br>-t 20<br>限制运行20分钟</p>
</blockquote>
<p>srun的其他选项可通过srun –help查看。</p>
<h2 id="5-sbatch后台提交作业"><a href="#5-sbatch后台提交作业" class="headerlink" title="5 sbatch后台提交作业"></a><strong>5 sbatch后台提交作业</strong></h2><p>sbatch一般情况下与srun一起提交作业到后台，需要将srun写到脚本中，再用sbatch 提交脚本。这种方式不受本地网络波动影响，提交作业后可以关闭本地电脑。sbatch命令没有屏幕输出，默认输出日志为提交目录下的slurm-xxx.out文件，可以使用tail -f slurm-xxx.out实时查看日志，其中xxx为作业号。<br>sbatch命令示例1（40个进程提交A.exe程序）：<br>编写脚本job1.sh，内容如下：</p>
<blockquote>
<p>#!/bin/bash<br>srun -n 40 A.exe</p>
</blockquote>
<p>然后在命令行执行sbatch -p com job1.sh 提交作业。脚本中的#!/bin/bash是bash脚本的固定格式。从脚本的形式可以看出，提交脚本是一个shell脚本，因此常用的shell脚本语法都可以使用。作业开始运行后，在提交目录会生成一个slurm-xxx.out日志文件，其中xxx表示作业号。<br>sbatch命令示例2（指定2个节点，4个进程，每个进程10个cpu核提交A.exe程序，限制运行60分钟）：<br>编写脚本job2.sh，内容如下：</p>
<blockquote>
<p>#!/bin/bash<br>#SBATCH -N 2<br>#SBATCH -n 4<br>#SBATCH -c 20<br>#SBATCH -t 60<br>srun -n 4 A.exe</p>
</blockquote>
<p>然后在命令行执行sbatch -p com job2.sh就可以提交作业。其中#SBATCH注释行是slurm定义的作业执行方式说明，一些需要通过命令行指定的设置可以通过这些说明写在脚本里，避免了每次提交作业写很长的命令行。<br>sbatch命令示例3（单节点提交多任务）<br>编写脚本job3.sh，内容如下：</p>
<blockquote>
<p>#!/bin/bash<br>srun -n 5 A.exe undefined<br>srun -n 5 B.exe undefined<br>srun -n 5 C.exe undefined<br>srun -n 5 C.exe undefined<br>wait</p>
</blockquote>
<p>然后在命令行执行sbatch -N 1 -p com job3.sh，这里是单节点同时提交4个任务，每个任务使用5个进程。这里需要5个任务全部执行完毕，作业才会退出。<br>sbatch 的一些常用命令选项基本与srun的相同，具体可以通过sbatch –help查看。</p>
<h2 id="6-salloc分配模式作业提交"><a href="#6-salloc分配模式作业提交" class="headerlink" title="6 salloc分配模式作业提交"></a><strong>6 salloc分配模式作业提交</strong></h2><p>salloc命令用于申请节点资源，一般用法如下：</p>
<blockquote>
<p>1、执行salloc -p com；<br>2、执行squeue 查看分配到的节点资源，比如分配到n001；<br>3、执行ssh comput1登陆到所分配的节点；<br>4、登陆节点后可以执行需要的提交命令或程序；<br>5、作业结束后，执行scancel JOBID释放分配模式作业的节点资源。</p>
</blockquote>
<h2 id="7-scancel取消已提交的作业"><a href="#7-scancel取消已提交的作业" class="headerlink" title="7 scancel取消已提交的作业"></a><strong>7 scancel取消已提交的作业</strong></h2><p>scancel 可以取消正在运行或排队的作业。<br>scancel的一些常用命令示例：</p>
<blockquote>
<p>scancel 123456<br>取消作业号为123456的作业<br>scancel -n test<br>取消作业名为test的作业<br>scancel -p com<br>取消提交到com队列的作业<br>scancel -t PENDING<br>取消正在排队的作业<br>scancel -w comput1<br>取消运行在comput1节点上的作业</p>
</blockquote>
<p>scancel的其他参数选项，可通过scancel –help查看</p>
<h2 id="8-scontrol查看正在运行的作业信息"><a href="#8-scontrol查看正在运行的作业信息" class="headerlink" title="8 scontrol查看正在运行的作业信息"></a><strong>8 scontrol查看正在运行的作业信息</strong></h2><p>scontrol命令可以查看正在运行的作业详情，比如提交目录、提交脚本、使用核数情况等，对已退出的作业无效。<br>scontrol的常用示例：</p>
<blockquote>
<p>scontrol show job 123456</p>
</blockquote>
<p>查看作业号为123456的作业详情。<br>scontrol 的其他参数选项，可通过scontrol –help查看。</p>
<h2 id="9-sacct查看历史作业信息"><a href="#9-sacct查看历史作业信息" class="headerlink" title="9 sacct查看历史作业信息"></a><strong>9 sacct查看历史作业信息</strong></h2><p>sacct命令可以查看历史作业的起止时间、结束状态、作业号、作业名、使用的节点数、节点列表、运行时间等。<br>sacct的常用命令示例：</p>
<blockquote>
<p>sacct -u paratera -S 2018-07-01 -E now –field=jobid,partition,jobname,user,nnodes,nodelist,start,end,elapsed,state</p>
</blockquote>
<p>其中，-u paratera是指查看paratera账号的历史作业，-S是开始查询时间，-E是截止查询时间，–format定义了输出的格式，jobid是指作业号，partition是指提交队列，user是指超算账号名，nnodes是节点数，nodelist是节点列表，start是开始运行时间，end是作业退出时间，elapsed是运行时间，state是作业结束状态。sacct –helpformat可以查看支持的输出格式。<br>sacct的其他参数选项可通过sacct –help查看。</p>
<h2 id="10-作业模版"><a href="#10-作业模版" class="headerlink" title="10 作业模版"></a><strong>10 作业模版</strong></h2><blockquote>
<p>#!/bin/bash<br>#SBATCH -p com 指定队列名称<br>#SBATCH -J test 指定作业名称<br>#SBATCH -N 2 指定要提交的节点数量<br>#SBATCH -n 8 指定要提交的总核数<br>#SBATCH -o test.o 指定标准输出文件名<br>#SBATCH -e test.e 指定错误输出文件名<br>srun -N 2 -n 8 -p com hostname 程序运行命令</p>
</blockquote>
<h2 id="11-Linux-常用命令"><a href="#11-Linux-常用命令" class="headerlink" title="11 Linux 常用命令"></a><strong>11 Linux 常用命令</strong></h2><ol>
<li>date :显示或设置系统时间 </li>
<li>ls :列出当前或指定目录下的文件或目录。 </li>
<li>pwd: 显示当前目录 </li>
<li>cd : 进入指定目录 </li>
<li>more, less, head tail: 显示或部分显示文件内容. </li>
<li>lp/lpstat/cancel, lpr/lpq/lprm: 打印文件的有关命令.</li>
<li>chmod:更改文件读、写或执行权限 </li>
<li>rm :删除文件或目录 </li>
<li>cp:拷贝文件或目录</li>
<li>mv : 文件更名或移动</li>
<li>vi/vim:文本编辑器 </li>
<li>top : 查看系统长时间运行的主要进程 </li>
<li>fg jobid :可以将一个后台进程放到前台。<br>Ctrl-z 可以将前台进程挂起(suspend), 然后可以用 bg jobid 让其到后台运行。<br>job undefined 可以直接让 job 直接在后台运行。 </li>
<li>ps:查看系统进程, ps -e 或 ps -o pid,ppid,session,tpgid, comm (其中 session 显示的 sessionid, tpgid 显示前台进程组 id, comm 显示命令名称。)</li>
<li>kill : 杀掉一个指定进程号的进程或向系统发送一个信号。</li>
<li>scp: 远程文件拷贝。 </li>
<li>man :给出指定命令的详细使用说明。 </li>
<li>Linux 的绝大部分命令都可以用man命令来查看更详细的说明。</li>
</ol>
<h2 id="12-其他教程"><a href="#12-其他教程" class="headerlink" title="12 其他教程"></a><strong>12 其他教程</strong></h2><p>官方手册（英文）：<a href="https://slurm.schedmd.com/documentation.html">https://slurm.schedmd.com/documentation.html</a></p>
<p>官方手册（中文）：<a href="https://docs.slurm.cn/users/kuai-su-ru-men-yong-hu-zhi-nan">https://docs.slurm.cn/users/kuai-su-ru-men-yong-hu-zhi-nan</a></p>
<p>Slurm作业调度系统指南（<a href="https://scc.ustc.edu.cn/">中科大超算中心</a>）：<a href="http://hmli.ustc.edu.cn/doc/userguide/slurm-userguide.pdf">http://hmli.ustc.edu.cn/doc/userguide/slurm-userguide.pdf</a></p>
<h2 id="附录：Slurm-Cheat-Sheet"><a href="#附录：Slurm-Cheat-Sheet" class="headerlink" title="附录：Slurm Cheat Sheet"></a>附录：Slurm Cheat Sheet</h2><embed src="../pdf/slurm_summary.pdf" width="100%" height="750" type="application/pdf">
]]></content>
      <categories>
        <category>并行计算</category>
      </categories>
      <tags>
        <tag>集群作业</tag>
      </tags>
  </entry>
</search>
